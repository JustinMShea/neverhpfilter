<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting started • neverhpfilter</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting started">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">neverhpfilter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.5-0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Getting-started.html">Getting started</a>
    </li>
    <li>
      <a href="../articles/Reproducing-Hamilton.html">Reproducing Hamilton</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/JustinMShea/neverhpfilter/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting started</h1>
                        <h4 data-toc-skip class="author">Justin M
Shea</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JustinMShea/neverhpfilter/blob/HEAD/vignettes/Getting-started.Rmd" class="external-link"><code>vignettes/Getting-started.Rmd</code></a></small>
      <div class="hidden name"><code>Getting-started.Rmd</code></div>

    </div>

    
    
<!--
  %\VignetteIndexEntry{Getting started}  
  %\VignetteEngine{simplermarkdown::mdweave_to_html}
  %\VignetteEncoding{UTF-8}
-->
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>neverhpfilter</code> package consists of 2
<code>functions</code>, 12 FRED economic data sets, Robert Shiller’s
U.S. Stock Market and CAPE Ratio data from 1871 through 2023, and a
<code>data.frame</code> containing the original filter estimates found
on table 2 of <a href="https://www.nber.org/papers/w23429" class="external-link">Hamilton
(2017) &lt;doi:10.3386/w23429&gt;.</a> All data objects are stored as
<code>.Rdata</code> files in eXtensible Time Series (<code>xts</code>)
format.</p>
<p>One of the first things to know about the <code>neverhpfilter</code>
package is that it’s functions accept and output, <code>xts</code>
objects.</p>
<p>An <code>xts</code> object is a <code>list</code> consisting of a
<code>vector</code> index of some date/time class paired with a
<code>matrix</code> object containing data of type <code>numeric</code>.
<code>data.table</code> is also heavily used in finance and has
efficient date/time indexing capabilities as well. It is useful when
working with large data.frame like lists containing vectors of multiple
data types of equal length. If using <code>data.table</code> or some
other index based time series data object, merging the <code>xts</code>
objects created by functions of this package should be fairly easy. Note
<code>xts</code> is a dependency listed under the “Suggests” field of
<code>data.table</code> DESCRIPTION file.</p>
<p>For more information on <code>xts</code> objects, go <a href="https://CRAN.R-project.org/package=xts" class="external-link">here</a> and <a href="http://rstudio-pubs-static.s3.amazonaws.com/288218_117e183e74964557a5da4fc5902fc671.html" class="external-link">here.</a></p>
<div class="section level3">
<h3 id="yth_glm">yth_glm<a class="anchor" aria-label="anchor" href="#yth_glm"></a>
</h3>
<p>The <code>yth_glm</code> function wraps <code>glm</code> and
primarily exists to model the output for the <code>yth_filter</code>. On
that note, the function API allows one to use the <code>...</code> to
pass any additional arguments to <code>glm</code>.</p>
<p>The <code>yth_filter</code> returns an object of class
<code>glm</code>, so one can use all generic methods associated with
<code>glm</code> objects. Here is an example of passing the results of a
<code>yth_glm</code> model to the <code>plot</code> function, which
outputs the standard plot diagnostics associated with the method.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://justinmshea.github.io/neverhpfilter/" class="external-link">neverhpfilter</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">GDPC1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">log_RGDP</span> <span class="op">&lt;-</span> <span class="fl">100</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">GDPC1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">gdp_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/yth_glm.html">yth_glm</a></span><span class="op">(</span><span class="va">log_RGDP</span><span class="op">[</span><span class="st">"1960/"</span><span class="op">]</span>, h <span class="op">=</span> <span class="fl">8</span>, p <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">gdp_model</span><span class="op">)</span></span></code></pre></div>
<p><img src="Getting-started_files/figure-html/unnamed-chunk-1-1.png" width="700"><img src="Getting-started_files/figure-html/unnamed-chunk-1-2.png" width="700"><img src="Getting-started_files/figure-html/unnamed-chunk-1-3.png" width="700"><img src="Getting-started_files/figure-html/unnamed-chunk-1-4.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="yth_filtered">yth_filtered<a class="anchor" aria-label="anchor" href="#yth_filtered"></a>
</h3>
<p>This is the main function of the package. It both accepts and outputs
<code>xts</code> objects. The resulting output contains various series
discussed in Hamilton (2017). These are a user defined combination of
the original, trend, cycle, and random walk series. See documentation
and the original paper for further details.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gdp_filtered</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/yth_filter.html">yth_filter</a></span><span class="op">(</span><span class="va">log_RGDP</span>, h <span class="op">=</span> <span class="fl">8</span>, p <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">gdp_filtered</span>, <span class="fl">16</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                GDPC1 GDPC1.trend GDPC1.cycle GDPC1.random</span></span>
<span><span class="co">## 2021-07-01  997.9125    998.6146  -0.7021626     3.433573</span></span>
<span><span class="co">## 2021-10-01  999.6996    999.2250   0.4745744     4.541104</span></span>
<span><span class="co">## 2022-01-01  999.4418    998.0482   1.3935290     5.685544</span></span>
<span><span class="co">## 2022-04-01  999.5119    991.0471   8.4648676    13.994958</span></span>
<span><span class="co">## 2022-07-01 1000.1829    998.5432   1.6396952     7.127129</span></span>
<span><span class="co">## 2022-10-01 1001.0073    999.1247   1.8825844     6.872664</span></span>
<span><span class="co">## 2023-01-01 1001.6970    998.0610   3.6359814     6.191576</span></span>
<span><span class="co">## 2023-04-01 1002.3021   1000.9223   1.3797813     5.238868</span></span>
<span><span class="co">## 2023-07-01 1003.3679   1001.7246   1.6432798     5.455458</span></span>
<span><span class="co">## 2023-10-01 1004.1535   1003.4622   0.6913126     4.453942</span></span>
<span><span class="co">## 2024-01-01 1004.5575   1003.3985   1.1590058     5.115713</span></span>
<span><span class="co">## 2024-04-01 1005.2937   1003.5638   1.7299355     5.781821</span></span>
<span><span class="co">## 2024-07-01 1006.0504   1004.5563   1.4941034     5.867509</span></span>
<span><span class="co">## 2024-10-01 1006.6556   1005.1812   1.4743859     5.648319</span></span>
<span><span class="co">## 2025-01-01 1006.5297   1005.7135   0.8161385     4.832713</span></span>
<span><span class="co">## 2025-04-01 1007.2609   1006.3020   0.9589198     4.958837</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">gdp_filtered</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "xts" "zoo"</span></span></code></pre>
<p>As the output is an <code>xts</code> object, it inherits all generic
methods associated with <code>xts</code>. For example, one can
conveniently produce clean time series graphics with
<code>plot.xts</code>.</p>
<p>Note the use of <code><a href="https://rdrr.io/pkg/xts/man/addPanel.html" class="external-link">xts::addPanel</a></code> function, which is used to
panel plot the <code>cycle</code> component of the
<code>yth_filter</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">log_RGDP</span>, grid.col <span class="op">=</span> <span class="st">"white"</span>, col <span class="op">=</span> <span class="st">"blue"</span>, legend.loc <span class="op">=</span> <span class="st">"topleft"</span>, main <span class="op">=</span> <span class="st">"100 x Log of Real GDP (GDPC1)"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Getting-started_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/xts/man/addPanel.html" class="external-link">addPanel</a></span><span class="op">(</span><span class="va">yth_filter</span>, output<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cycle"</span><span class="op">)</span>, type<span class="op">=</span><span class="st">"h"</span>, on<span class="op">=</span><span class="cn">NA</span>, col<span class="op">=</span><span class="st">"darkred"</span> <span class="op">)</span></span></code></pre></div>
<p><img src="Getting-started_files/figure-html/unnamed-chunk-3-2.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="choices-for-h-and-p">Choices for h and p<a class="anchor" aria-label="anchor" href="#choices-for-h-and-p"></a>
</h3>
<p>In the original paper, Hamilton aggregates the <code>PAYEMS</code>
monthly employment series into data of quarterly periodicity prior to
apply his filter. That is a desirable approach when comparing with other
economic series of quarterly periodicity. However, using the
<code>yth_filter</code> function, one can choose to retain the monthly
series and adjust the <code>h</code> and <code>p</code> parameters
accordingly.</p>
<p>The default parameters of <code>h = 8</code> and <code>p = 4</code>
assume times series data of a quarterly periodicity. For time series of
monthly periodicity, one can retain the same look-ahead and lag periods
with <code>h = 24</code> and <code>p = 12</code>. See the
<code>yth_filter</code> documentation for more details.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Employment_log</span> <span class="op">&lt;-</span> <span class="fl">100</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">PAYEMS</span><span class="op">[</span><span class="st">"1950/"</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">employment_cycle</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/yth_filter.html">yth_filter</a></span><span class="op">(</span><span class="va">Employment_log</span>, h <span class="op">=</span> <span class="fl">24</span>, p <span class="op">=</span> <span class="fl">12</span>, output <span class="op">=</span> <span class="st">"cycle"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">employment_cycle</span>, grid.col <span class="op">=</span> <span class="st">"white"</span>, type <span class="op">=</span> <span class="st">"h"</span>, up.col <span class="op">=</span> <span class="st">"darkgreen"</span>, dn.col <span class="op">=</span> <span class="st">"darkred"</span>, </span>
<span>     main <span class="op">=</span> <span class="st">"Log of Employment cycle"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Getting-started_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p>In addition to adjusting parameters to accommodate other
periodicities, one may wish to explore longer term cycles by extending
<code>h</code>. Below are examples of moving the look-ahead period
defined by <code>h</code> from 8 quarters (2 years), to 20 quarters (5
years), and then 40 quarters (10 years). These examples are not an
endorsement or suggestion of these parameters, merely an illustration of
the flexibility the function offers.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gdp_5yr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/yth_filter.html">yth_filter</a></span><span class="op">(</span><span class="va">log_RGDP</span>, h <span class="op">=</span> <span class="fl">20</span>, p <span class="op">=</span> <span class="fl">4</span>, output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"trend"</span>, <span class="st">"cycle"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">gdp_5yr</span><span class="op">[</span><span class="st">"1980/"</span><span class="op">]</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, grid.col <span class="op">=</span> <span class="st">"white"</span>, legend.loc <span class="op">=</span> <span class="st">"topleft"</span>, </span>
<span>     main <span class="op">=</span> <span class="st">"Log of Real GDP and 5-year trend"</span>, </span>
<span>     panels <span class="op">=</span> <span class="st">'lines(gdp_5yr["1980/"][,3], type="h", on=NA)'</span><span class="op">)</span></span></code></pre></div>
<p><img src="Getting-started_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gdp_10yr</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/yth_filter.html">yth_filter</a></span><span class="op">(</span><span class="va">log_RGDP</span>, h <span class="op">=</span> <span class="fl">40</span>, p <span class="op">=</span> <span class="fl">4</span>, output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"trend"</span>, <span class="st">"cycle"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">gdp_10yr</span><span class="op">[</span><span class="st">"1980/"</span><span class="op">]</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span>, grid.col <span class="op">=</span> <span class="st">"white"</span>, legend.loc <span class="op">=</span> <span class="st">"topleft"</span>, </span>
<span>     main <span class="op">=</span> <span class="st">"Log of Real GDP and 10-year trend"</span>,</span>
<span>     panels <span class="op">=</span> <span class="st">'lines(gdp_10yr["1980/"][,3], type="h", on=NA)'</span><span class="op">)</span></span></code></pre></div>
<p><img src="Getting-started_files/figure-html/unnamed-chunk-5-2.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h3>
<p>These functions filter econometric time series into
<code>trend</code> and <code>cycle</code> components. Further, these
estimations are more stable and do not have the well documented
estimation issues associated with the beginning and end of those
generated by the HP-filter.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Justin M. Shea.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
